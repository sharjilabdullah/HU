Index: .idea/runConfigurations.xml
===================================================================
--- .idea/runConfigurations.xml	(revision 99999a550f1fc409861fda2c97986408f73b029b)
+++ .idea/runConfigurations.xml	(revision 99999a550f1fc409861fda2c97986408f73b029b)
@@ -1,10 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<project version="4">
-  <component name="RunConfigurationProducerService">
-    <option name="ignoredProducers">
-      <set>
-        <option value="com.android.tools.idea.compose.preview.runconfiguration.ComposePreviewRunConfigurationProducer" />
-      </set>
-    </option>
-  </component>
-</project>
\ No newline at end of file
Index: app/src/main/java/com/example/visudhaajivamapp/LoginActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.visudhaajivamapp;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.graphics.Color;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.text.method.HideReturnsTransformationMethod;\r\nimport android.text.method.PasswordTransformationMethod;\r\nimport android.util.Log;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.PopupMenu;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.Request;\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.StringRequest;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.example.visudhaajivamapp.userprofile.UserDetails;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.JsonObject;\r\n\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class LoginActivity extends AppCompatActivity implements  AdapterView.OnItemSelectedListener{\r\n\r\n    public static final String LOGIN_URL=\"https://visudhajivam.in/android/login.php\";\r\n    public static final String USER_DETAILS=\"UserDetails\";\r\n    public static final String KEY_EMAIL=\"user_name\";\r\n    public static final String KEY_PASSWORD=\"password\";\r\n    public static final String LOGIN_SUCCESS=\"success\";\r\n    public static final String Key_identity =\"identity\";\r\n    public static final String SHARED_PREF_NAME=\"tech\";\r\n    public static final String EMAIL_SHARED_PREF=\"user_name\";\r\n    public static final String ID_SHARED_PREF=\"id\";\r\n    public static final String MOBILE_SHARED_PREF=\"mobile\";\r\n    public static final String LOGGEDIN_SHARED_PREF=\"loggedin\";\r\n    public static final String Key_loggedinas = \"login\";\r\n    private boolean loggedIn=false;\r\n    private UserDetails user;\r\n    String[] types = { \"user\", \"employee\", \"business\"};\r\n    public static String type;\r\n\r\n    TabLayout tabLayout;\r\n    ViewPager viewPager;\r\n    FloatingActionButton fb, google, twitter;\r\n    float v=0;\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    private final static int RC_SIGN_IN = 123;\r\n    private FirebaseAuth mAuth;\r\n    ProgressDialog dialog;\r\n\r\n    EditText txtemail,pass;\r\n    ProgressBar progressBar;\r\n    Button login, register;\r\n    ImageView show_pass_butt;\r\n    TextView loginas;\r\n    Spinner spin;\r\n\r\n    /*\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        FirebaseUser user = mAuth.getCurrentUser();\r\n        if(user!=null){\r\n            Intent intent = new Intent(getApplicationContext(),DashboardMain.class);\r\n            startActivity(intent);\r\n        }\r\n    }\r\n\r\n     */\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n        tabLayout = findViewById(R.id.tab_Layout);\r\n        /*\r\n        fb = findViewById(R.id.fab_fb);\r\n        google = findViewById(R.id.fab_google);\r\n        twitter = findViewById(R.id.fab_twitter);\r\n\r\n         */\r\n\r\n        tabLayout.addTab(tabLayout.newTab().setText(\"Login\"));\r\n        /*\r\n        tabLayout.addTab(tabLayout.newTab().setText(\"Sign Up\"));\r\n\r\n         */\r\n        tabLayout.setSelectedTabIndicatorColor(Color.parseColor(\"#12cad6\"));\r\n        tabLayout.setSelectedTabIndicatorHeight((int) (5 * getResources().getDisplayMetrics().density));\r\n        tabLayout.setTabTextColors(Color.parseColor(\"#727272\"), Color.parseColor(\"#004d40\"));\r\n        tabLayout.setTabGravity(TabLayout.GRAVITY_FILL);\r\n\r\n\r\n        spin = findViewById(R.id.types_spinner);\r\n\r\n        txtemail = findViewById(R.id.email);\r\n        pass = findViewById(R.id.pass);\r\n        //type = findViewById(R.id.type);\r\n        login = findViewById(R.id.login);\r\n        register = findViewById(R.id.register);\r\n        show_pass_butt = findViewById(R.id.show_pass_btn);\r\n        progressBar = findViewById(R.id.progressbar);\r\n        loginas = findViewById(R.id.loginas);\r\n\r\n        dialog = new ProgressDialog(this);\r\n        dialog.setMessage(\"Please wait...\");\r\n\r\n        txtemail.setTranslationY(800);\r\n        pass.setTranslationY(800);\r\n        //type.setTranslationY(800);\r\n        login.setTranslationY(800);\r\n        register.setTranslationY(800);\r\n        show_pass_butt.setTranslationY(800);\r\n        loginas.setTranslationY(800);\r\n        spin.setTranslationY(800);\r\n\r\n\r\n\r\n        txtemail.setAlpha(v);\r\n        pass.setAlpha(v);\r\n        //type.setAlpha(v);\r\n        login.setAlpha(v);\r\n        register.setAlpha(v);\r\n        show_pass_butt.setAlpha(v);\r\n        loginas.setAlpha(v);\r\n        spin.setAlpha(v);\r\n\r\n\r\n        txtemail.animate().translationY(0).alpha(1).setDuration(800).setStartDelay(300).start();\r\n        pass.animate().translationY(0).alpha(1).setDuration(800).setStartDelay(500).start();\r\n        show_pass_butt.animate().translationY(0).alpha(1).setDuration(800).setStartDelay(700).start();\r\n        loginas.animate().translationY(0).alpha(1).setDuration(800).setStartDelay(700).start();\r\n        spin.animate().translationY(0).alpha(1).setDuration(800).setStartDelay(700).start();\r\n        //type.animate().translationY(0).alpha(1).setDuration(800).setStartDelay(500).start();\r\n        login.animate().translationY(0).alpha(1).setDuration(800).setStartDelay(700).start();\r\n        register.animate().translationY(0).alpha(1).setDuration(800).setStartDelay(900).start();\r\n\r\n\r\n\r\n        /*\r\n\r\n        fb.setTranslationY(300);\r\n        google.setTranslationY(300);\r\n        twitter.setTranslationY(300);\r\n         fb.setAlpha(v);\r\n        google.setAlpha(v);\r\n        twitter.setAlpha(v);\r\n         fb.animate().translationY(0).alpha(1).setDuration(1000).setStartDelay(400).start();\r\n        google.animate().translationY(0).alpha(1).setDuration(1000).setStartDelay(600).start();\r\n        twitter.animate().translationY(0).alpha(1).setDuration(1000).setStartDelay(800).start();\r\n         */\r\n        tabLayout.setTranslationY(300);\r\n        tabLayout.setAlpha(v);\r\n        tabLayout.animate().translationY(0).alpha(1).setDuration(1000).setStartDelay(100).start();\r\n\r\n        //createRequest();\r\n\r\n        /*\r\n        google.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                signIn();\r\n            }\r\n        });\r\n\r\n         */\r\n\r\n        spin.setOnItemSelectedListener(this);\r\n\r\n        //Creating the ArrayAdapter instance having the country list\r\n        ArrayAdapter aa = new ArrayAdapter(this,android.R.layout.simple_spinner_item,types);\r\n        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        //Setting the ArrayAdapter data on the Spinner\r\n        spin.setAdapter(aa);\r\n\r\n\r\n        login.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                login();\r\n            }\r\n        });\r\n\r\n        register.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                //Creating the instance of PopupMenu\r\n                PopupMenu popup = new PopupMenu(LoginActivity.this, register);\r\n                //Inflating the Popup using xml file\r\n                popup.getMenuInflater().inflate(R.menu.popup_menu, popup.getMenu());\r\n                //registering popup with OnMenuItemClickListener\r\n                popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {\r\n                    public boolean onMenuItemClick(MenuItem item) {\r\n                        Toast.makeText(LoginActivity.this, \"You Clicked : \" + item.getTitle(), Toast.LENGTH_SHORT).show();\r\n\r\n                        int id = item.getItemId();\r\n                        if (id == R.id.registerAsUser) {\r\n                            Uri uri = Uri.parse(\"https://visudhajivam.in/create.php\");\r\n                            Intent intent = new Intent(Intent.ACTION_VIEW, uri);\r\n                            startActivity(intent);\r\n                        }\r\n                        if (id == R.id.registerAsEmployee) {\r\n                            Uri uri = Uri.parse(\"https://visudhajivam.in/emp_create.php\");\r\n                            Intent intent = new Intent(Intent.ACTION_VIEW, uri);\r\n                            startActivity(intent);\r\n                        }\r\n                        if (id == R.id.registerAsBusiness) {\r\n                            Uri uri = Uri.parse(\"https://visudhajivam.in/business_reg.php\");\r\n                            Intent intent = new Intent(Intent.ACTION_VIEW, uri);\r\n                            startActivity(intent);\r\n                        }\r\n\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                popup.show();//show popup\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onItemSelected(AdapterView<?> arg0, View view, int position, long id) {\r\n        //Toast.makeText(getApplicationContext(),types[position] , Toast.LENGTH_LONG).show();\r\n        type= types[position];\r\n    }\r\n\r\n    @Override\r\n    public void onNothingSelected(AdapterView<?> arg0) {\r\n        Toast.makeText(getApplicationContext(),\"Please select your identity\" , Toast.LENGTH_LONG).show();\r\n    }\r\n\r\n\r\n    // from php\r\n    private void login() {\r\n        \r\n        final String user_name = txtemail.getText().toString().trim();\r\n        final String password = pass.getText().toString().trim();\r\n        final String login = type;\r\n\r\n        if(TextUtils.isEmpty(user_name)){\r\n            Toast.makeText(LoginActivity.this, \"Please Enter Email\", Toast.LENGTH_SHORT).show();\r\n            return;\r\n        }\r\n        if(TextUtils.isEmpty(password)){\r\n            Toast.makeText(LoginActivity.this, \"Please Enter a Password\", Toast.LENGTH_SHORT).show();\r\n            return;\r\n        }\r\n        dialog.show();\r\n        StringRequest stringRequest = new StringRequest(Request.Method.POST, LOGIN_URL,\r\n                new Response.Listener<String>() {\r\n\r\n                    @SuppressLint(\"LongLogTag\")\r\n                    @Override\r\n                    public void onResponse(String response) {\r\n\r\n                        try {\r\n                            JSONArray array = new JSONArray(response);\r\n\r\n                            Log.d(\"showwwwwwwwwww response\",response);\r\n                            Log.d(\"showwwwwwwwwww array\", String.valueOf(array));\r\n                            if(array.length()>0){\r\n\r\n                                SharedPreferences sharedPreferences = LoginActivity.this.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\r\n\r\n                                SharedPreferences.Editor editor = sharedPreferences.edit();\r\n                                JSONObject json = array.getJSONObject(0);\r\n\r\n                                //adding details to UserDetails object\r\n                                addDataToUserDetails(json);\r\n\r\n                                //adding  User details to shared preference\r\n                                Gson gson = new Gson();\r\n                                String storedUser = gson.toJson(user);\r\n                                editor.putString(USER_DETAILS,storedUser);\r\n\r\n                                editor.putBoolean(LOGGEDIN_SHARED_PREF, true);\r\n                                editor.putString(EMAIL_SHARED_PREF, user_name);\r\n                                editor.putInt(ID_SHARED_PREF,json.getInt(\"id\"));\r\n                                editor.putString(MOBILE_SHARED_PREF,json.getString(\"phone\"));\r\n                                editor.putString(Key_identity, json.getString((\"identity\")));\r\n                                editor.commit();\r\n                                dialog.dismiss();\r\n                                Log.d(\"json.getString((\\\"identity\\\"))\",json.getString((\"identity\")));\r\n                                Log.i(\"SharedId\",\" Shared Id = \"+sharedPreferences.getInt(\"id\",0));\r\n                                Intent intent = new Intent(LoginActivity.this, DashboardMain.class);\r\n\r\n                                startActivity(intent);\r\n                            }else{\r\n                                Toast.makeText(LoginActivity.this, \"User Not Found!, Please Create Account First\", Toast.LENGTH_LONG).show();\r\n                            }\r\n\r\n                        } catch (JSONException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                    }\r\n                }){\r\n            @Override\r\n            protected Map<String, String> getParams() throws AuthFailureError {\r\n                Map<String,String> prams = new HashMap<>();\r\n                prams.put(KEY_EMAIL, user_name);\r\n                prams.put(KEY_PASSWORD, password);\r\n                prams.put(Key_loggedinas,login);\r\n\r\n                return prams;\r\n            }\r\n        };\r\n        RequestQueue requestQueue = Volley.newRequestQueue(this);\r\n        requestQueue.add(stringRequest);\r\n    }\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        SharedPreferences sharedPreferences = getSharedPreferences(SHARED_PREF_NAME,Context.MODE_PRIVATE);\r\n        loggedIn = sharedPreferences.getBoolean(LOGGEDIN_SHARED_PREF, false);\r\n        if(loggedIn){\r\n            Intent intent = new Intent(LoginActivity.this, DashboardMain.class);\r\n            startActivity(intent);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    /*\r\n    private void createRequest() {\r\n        // Configure Google Sign In\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n    }\r\n\r\n    private void signIn() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        // Result returned from launching the Intent from GoogleSignInApi.getSignInIntent(...);\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            try {\r\n                // Google Sign In was successful, authenticate with Firebase\r\n                GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                firebaseAuthWithGoogle(account.getIdToken());\r\n            } catch (ApiException e) {\r\n                // Google Sign In failed, update UI appropriately\r\n                Toast.makeText(this,\"Login failed\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            // Sign in success, update UI with the signed-in user's information\r\n                            FirebaseUser user = mAuth.getCurrentUser();\r\n                            Intent intent = new Intent(getApplicationContext(),DashboardMain.class);\r\n                            startActivity(intent);\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Toast.makeText(LoginActivity.this, \"Sorry, Authorization Failed!\", Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\n */\r\n\r\n    public void addDataToUserDetails(JSONObject json){\r\n        try{\r\n            user = new UserDetails();\r\n            user.setName(json.getString(\"name\"));\r\n            user.setUser_name(json.getString(\"user_name\"));\r\n            user.setPhone(json.getString(\"phone\"));\r\n            user.setAddress(json.getString(\"address\"));\r\n            user.setAadhar(json.getString(\"aadhar\"));\r\n            user.setDist(json.getString(\"dist\"));\r\n            user.setCountry(json.getString(\"country\"));\r\n            user.setBlood(json.getString(\"blood\"));\r\n            user.setPincode(json.getString(\"pincode\"));\r\n            user.setDob(json.getString(\"dob\"));\r\n            user.setExpiry(json.getString(\"expiry\"));\r\n            user.setPhoto(json.getString(\"photo\"));\r\n            user.setIdentity(json.getString(\"identity\"));\r\n        }\r\n        catch (JSONException exc){\r\n            Log.i(\"UserException\",\"Error on adding data to UserDetails object\");\r\n        }\r\n    }\r\n\r\n    public void ShowHidePass(View view) {\r\n\r\n        if(view.getId()==R.id.show_pass_btn){\r\n\r\n            if(pass.getTransformationMethod().equals(PasswordTransformationMethod.getInstance())){\r\n                //Show Password\r\n                pass.setTransformationMethod(HideReturnsTransformationMethod.getInstance());\r\n            }\r\n            else{\r\n                //Hide Password\r\n                pass.setTransformationMethod(PasswordTransformationMethod.getInstance());\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/visudhaajivamapp/LoginActivity.java	(revision 99999a550f1fc409861fda2c97986408f73b029b)
+++ app/src/main/java/com/example/visudhaajivamapp/LoginActivity.java	(date 1625683936294)
@@ -1,6 +1,7 @@
 package com.example.visudhaajivamapp;
 
 import android.annotation.SuppressLint;
+import android.app.ProgressDialog;
 import android.content.Context;
 import android.content.Intent;
 import android.content.SharedPreferences;
